<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" routerLink="/">JNP2</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" routerLink="/">Home</a>
      </li>
      <li class="nav-item active">
        <a class="nav-link" routerLink="/list">Your projects</a>
      </li>
      <li class="nav-item active">
        <a class="nav-link" routerLink="/project/new">Create project</a>
      </li>
    </ul>
    <div class="my-2 my-lg-0">
      <div *ngIf="!username; else elseBlock">
        <button id="loginButton" type="button" class="btn btn-success" data-toggle="modal" data-target="#loginModal">Login</button>
        <button id="registerButton" type="button" class="btn btn-outline-success" data-toggle="modal" data-target="#registerModal">Sign up</button>
      </div>
      <ng-template #elseBlock>
        <span id="user-text">Hi, {{ username }}</span>
        <button type="button" class="btn btn-danger" (click)="logout()">Logout</button>
      </ng-template>
    </div>
  </div>
</nav>

<div class="modal fade" id="loginModal" role="dialog">
  <div class="modal-dialog">
  
    <div class="modal-content">
      <form (ngSubmit)="login($event)">
        <div class="modal-body">
          <div *ngIf="loginError" class="alert alert-danger">
            {{ loginError }}
          </div>
          <div class="form-group">
            <label for="userLogin">Login</label>
            <input type="text" class="form-control" id="userLogin" [(ngModel)]="loginModel.username" name="userLogin">
          </div>

          <div class="form-group">
            <label for="password">Password</label>
            <input type="password" class="form-control" id="password" [(ngModel)]="loginModel.password" name="password">
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-success">Login</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </form>
    </div>
    
  </div>
</div>

<div class="modal fade" id="registerModal" role="dialog">
  <div class="modal-dialog">
  
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Registration form</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>        
      </div>
      <form (ngSubmit)="register($event)">
        <div class="modal-body">
          <div *ngIf="registerError" class="alert alert-danger">
            {{ registerError }}
          </div>

          <div class="form-group">
            <label for="username">Username</label>
            <input type="text" class="form-control" id="registerModal" [(ngModel)]="registrationModel.username" name="registerModal">
          </div>

          <div class="form-group">
            <label for="passwordRegister">Password</label>
            <input type="password" class="form-control" id="passwordRegister" [(ngModel)]="registrationModel.password" name="passwordRegister">
          </div>

          <div class="form-group">
            <label for="password_conf">Confirm password</label>
            <input type="password" class="form-control" id="password_conf" [(ngModel)]="registrationModel.password_confirmation" name="password_conf">
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-success">Register</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </form>
    </div>
    
  </div>
</div>

<app-notify-toast></app-notify-toast>